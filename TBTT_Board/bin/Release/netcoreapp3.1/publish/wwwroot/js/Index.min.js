function customMenuGameBoard(){return{deleteItem:{label:"Delete",action:function(){}}}}function customMenuPlayingList(n){return{deleteItem:{label:"Toggle Freeze",action:function(){var f=$("[name=__RequestVerificationToken]").val(),i={},r,t,u;i.__RequestVerificationToken=f;r=$("div#urlSaveWaitingListNodeStatus").data("request-url");n!=null&&n.data!=null&&(n.data.nodestatus!=null&&(t=n.data.nodestatus),n.data.nodeid!=null&&(u=n.data.nodeid));t!=null&&(t=t=="True"?"False":"True");$.ajax({type:"POST",contentType:"application/x-www-form-urlencoded; charset=utf-8",headers:i,url:r,data:{MembershipID:u,NodeStatus:t},cache:!1,success:function(i){var u=i,f="",r;u!=null&&(f=u.responseText);f==TBTTCONSTANT.SUCCESS_MESSAGE&&(r=$("#divPlayingList").jstree(!0),t=="False"?n!=null&&(r.disable_node(n),n.data!=null&&n.data.nodestatus!=null&&(n.data.nodestatus="False")):n!=null&&(r.enable_node(n),n.data!=null&&n.data.nodestatus!=null&&(n.data.nodestatus="True")),success(TBTTCONSTANT.SUCCESS_MESSAGE));i==TBTTCONSTANT.GENERIC_ERROR&&error(TBTTCONSTANT.GENERIC_ERROR)},error:function(n){if(n.status===401){window.location.href=n.Data.LogOnUrl;return}n.status===403?error(TBTTCONSTANT.UNAUTHORIZEDREQUEST):error(TBTTCONSTANT.GENERIC_ERROR)}})}}}}function activateAvailableList(){var n=$("div#divAvailableList");n.jstree({core:{multiple:!1,check_callback:function(n){return n==="delete_node"?!0:n==="create_node"?!1:n==="move_node"?!1:!0}},plugins:["dnd","search","state","types"],dnd:{check_while_dragging:!0}});n.redraw();n.jstree("open_all")}function setNodeStatusOnLoad(){var t,n="True";treePlayingList==null&&(treePlayingList=$("#divPlayingList").jstree(!0));$("#divPlayingList").bind("ready.jstree",function(){$(this).jstree().open_all();$("#divPlayingList li").each(function(){var i=$("#divPlayingList").jstree().get_node(this.id);t=i.id;t!=-999&&(n=i.data.nodestatus,n!=null&&(n!="False"&&n?$(this).jstree().enable_node(i):$(this).jstree().disable_node(i)))})});return}function loadPlayingList(){var i=$("div#urlGetWaitingList").data("request-url");treePlayingList=$("div#divPlayingList");var r='<ul><li id="playingListRoot" data-nodeid = "-999" data-jstree=\'{"icon":"fa fa-cubes"}\'><a data-nodeid = "-999" href="#"> Add Players Here <\/a>',u="<\/li><\/ul>",n=document.getElementById("txtPlaying"),t="";n!=null&&(t=n.value);$.ajax({type:"GET",contentType:"application/json",url:i,data:{PlayingName:t},cache:!1,success:function(n){treePlayingList.jstree("destroy");n=r+n+u;treePlayingList.html(n);treePlayingList.jstree({core:{multiple:!1,check_callback:function(n){return n==="delete_node"?!0:n==="move_node"?!1:!0}},plugins:["dnd","search","state","types"],contextmenu:{items:customMenuPlayingList},dnd:{is_draggable:!0}});treePlayingList.jstree("open_all")},error:function(n){if(n.status===401){error(TBTTCONSTANT.UNAUTHORIZEDREQUEST);return}n.status===403?error(TBTTCONSTANT.UNAUTHORIZEDREQUEST):error(TBTTCONSTANT.GENERIC_ERROR)}});setNodeStatusOnLoad();return}function loadAvailableList(){var u=$("div#urlGetAvailableList").data("request-url"),t=document.getElementById("txtAvailable"),n,i,r;treeAvailableList=$("div#divAvailableList");n="";t!=null&&(n=t.value);i="<ul>";r="<\/ul>";$.ajax({type:"GET",contentType:"application/json",url:u,data:{AvailableName:n},cache:!1,success:function(n){treeAvailableList.jstree("destroy");n=i+n+r;treeAvailableList.html(n);treeAvailableList.jstree({core:{multiple:!1,check_callback:function(n){return n==="delete_node"?!0:n==="create_node"?!1:n==="move_node"?!1:!0}},plugins:["dnd","search","state","types"],dnd:{check_while_dragging:!0}})},error:function(n){if(n.status===401){error(TBTTCONSTANT.UNAUTHORIZEDREQUEST);return}n.status===403?error(TBTTCONSTANT.UNAUTHORIZEDREQUEST):error(TBTTCONSTANT.GENERIC_ERROR)}});return}function addAvailableList(n){var r=$("div#urlSaveAvailableList").data("request-url"),u=$("[name=__RequestVerificationToken]").val(),i={},t;if(i.__RequestVerificationToken=u,t=document.getElementById("divMsg"),t.innerHTML="",n.length<=3)return t.style.display="block",t.innerHTML="Length of Member Name - "+n+", should be minimum 4 characters.",!1;$.ajax({type:"POST",contentType:"application/x-www-form-urlencoded; charset=utf-8",headers:i,url:r,async:!1,data:{formData:n},cache:!1,success:function(i){if(i.responseText==TBTTCONSTANT.DUPLICATE_MESSAGE){t.style.display="block";n=n.replace("%","");n=n.replace("?","");t.innerHTML="Duplicate Name - "+n+". Please add a unique name not in Board.";return}if(i.responseText==TBTTCONSTANT.INVALID_MEMBERSHIPID){t.style.display="block";n=n.replace("%","");n=n.replace("?","");t.innerHTML="Invalid MembershipID - "+n+". Please contact front desk for any questions.";return}},error:function(n){if(n.status===401){error(TBTTCONSTANT.UNAUTHORIZEDREQUEST);return}n.status===403?error(TBTTCONSTANT.UNAUTHORIZEDREQUEST):error(TBTTCONSTANT.GENERIC_ERROR)}});loadAvailableList();return}function gameBoardVisibility(n){var t=document.getElementById("divParentCourt1"),i=document.getElementById("divParentCourt2"),r=document.getElementById("divParentCourt3"),u=document.getElementById("divParentCourt4"),f=document.getElementById("divParentCourt5"),e=document.getElementById("divParentCourt6"),o=document.getElementById("divParentCourt7"),s=document.getElementById("divParentCourt8"),h=document.getElementById("divParentCourt9"),c=$("#Court-1").val(),l=$("#Court-2").val(),a=$("#Court-3").val(),v=$("#Court-4").val(),y=$("#Court-5").val(),p=$("#Court-6").val(),w=$("#Court-7").val(),b=$("#Court-8").val(),k=$("#Court-9").val();if(n.length>0){t.style.display="none";i.style.display="none";r.style.display="none";u.style.display="none";f.style.display="none";e.style.display="none";o.style.display="none";s.style.display="none";h.style.display="none";switch(n){case"1":c.toLowerCase()=="true"&&(t.style.display="block");break;case"2":l.toLowerCase()=="true"&&(i.style.display="block");break;case"3":a.toLowerCase()=="true"&&(r.style.display="block");break;case"4":v.toLowerCase()=="true"&&(u.style.display="block");break;case"5":y.toLowerCase()=="true"&&(f.style.display="block");break;case"6":p.toLowerCase()=="true"&&(e.style.display="block");break;case"7":w.toLowerCase()=="true"&&(o.style.display="block");break;case"8":b.toLowerCase()=="true"&&(s.style.display="block");break;case"9":k.toLowerCase()=="true"&&(h.style.display="block");break;default:t.style.display="block";i.style.display="block";r.style.display="block";u.style.display="block";f.style.display="block";e.style.display="block";o.style.display="block";s.style.display="block";h.style.display="block";loadGameBoard()}}else loadGameBoard();return}function toggleGameBoard(){var n=document.getElementById("txtGame"),t="";n!=null&&(t=n.value);gameBoardVisibility(t);return}function displayGameBoard(n,t){t.toLowerCase()=="false"?n.hide():n.show();return}function loadGameBoard(){var n=$("#divParentCourt1"),t=$("#Court-1").val(),i=$("#divParentCourt2"),r=$("#Court-2").val(),u=$("#divParentCourt3"),f=$("#Court-3").val(),e=$("#divParentCourt4"),o=$("#Court-4").val(),s=$("#divParentCourt5"),h=$("#Court-5").val(),c=$("#divParentCourt6"),l=$("#Court-6").val(),a=$("#divParentCourt7"),v=$("#Court-7").val(),y=$("#divParentCourt8"),p=$("#Court-8").val(),w=$("#divParentCourt9"),b=$("#Court-9").val();displayGameBoard(n,t);displayGameBoard(i,r);displayGameBoard(u,f);displayGameBoard(e,o);displayGameBoard(s,h);displayGameBoard(c,l);displayGameBoard(a,v);displayGameBoard(y,p);displayGameBoard(w,b);return}var treePlayingList="",treeAvailableList="",is_moving=!1,elements=[],elementsID=[],elementsType=[];$("div#divAvailableList").on("mousedown touchstart","a.jstree-anchor",function(){is_moving=!0;elements=[];elementsID=[];elementsType=[];for(var i=$("#divAvailableList").jstree(!0),t=$(this).closest("li"),n=t.attr("id");t!=null;){elements.push(t.children("a").text());n=i.get_node(t);n!=null&&n.data.nodeid!=-999&&(elementsID.push(n.data.nodeid),elementsType.push(n.data.nodemembershiptype));n=i.get_parent(n);try{if(n=="#")break;t=$("#"+n)}catch(r){}}});$("div#divPlayingList").on("mouseup touchend","a.jstree-anchor",function(){if(is_moving=!0,is_moving==!0){var h=$("div#urlSaveWaitingList").data("request-url"),c=$("[name=__RequestVerificationToken]").val(),o={};o.__RequestVerificationToken=c;for(var i=$("#divPlayingList").jstree(!0),l=$("#divAvailableList").jstree(!0),u="playingListRoot",t=elements.length-1,a=t,f="";t>=0;){var e=elements.pop(),r=elementsID.pop(),n=elementsType.pop(),s=!1;$("#divPlayingList li").each(function(){e==$(this).children("a").text()&&(s=!0)});s==!1&&$.ajax({type:"POST",contentType:"application/x-www-form-urlencoded; charset=utf-8",headers:o,url:h,data:{MembershipID:r,MemberName:e,MembershipType:n},cache:!1,success:function(o){var c=o,v="",y,s,h;c!=null&&(v=c.responseText);v==TBTTCONSTANT.SUCCESS_MESSAGE&&(f="",n!=null&&n!="M"&&n!="G"&&(f="nonMember"),y={text:e,data:{nodeid:r,nodemembershiptype:n},a_attr:{"data-nodeid":r,"data-nodemembershiptype":n,"class":f}},u=treePlayingList.jstree(!0).create_node(u,y),treePlayingList.jstree(!0).open_all(),s=i.get_node(u),t==a?i.set_icon(s,"fa fa-user-circle-o"):t==0?i.set_icon(s,"fa fa-user-circle-o"):i.set_icon(s,"fa fa-user-circle-o"),h="",$("#divAvailableList li").each(function(){r==$(this).data("nodeid")&&(h=$(this),l.delete_node(h,!0))}),success(TBTTCONSTANT.SUCCESS_MESSAGE));o==TBTTCONSTANT.GENERIC_ERROR&&error(TBTTCONSTANT.GENERIC_ERROR)},error:function(n){if(n.status===401){window.location.href=n.Data.LogOnUrl;return}n.status===403?error(TBTTCONSTANT.UNAUTHORIZEDREQUEST):error(TBTTCONSTANT.GENERIC_ERROR)}});t--}treePlayingList.jstree(!0).redraw();treeAvailableList.jstree(!0).open_all();treeAvailableList.jstree(!0).redraw()}is_moving=!1;elements=[];elementsID=[];elementsType=[]});$(function(){var t=document.getElementById("txtMembershipID"),r=document.getElementById("txtAvailable"),u=document.getElementById("txtPlaying"),f=document.getElementById("txtGame"),n=document.getElementById("divMsg"),i="";n.style.display="none";t.addEventListener("keypress",function(r){n.style.display="none";r.keyCode==13&&(t!=null&&(i=t.value),i!=""&&(addAvailableList(i),t.value=""));return},!1);r.addEventListener("keypress",function(t){n.style.display="none";t.keyCode==13&&(loadAvailableList(),r.value="");return},!1);u.addEventListener("keypress",function(t){n.style.display="none";t.keyCode==13&&(loadPlayingList(),u.value="");return},!1);f.addEventListener("keypress",function(t){n.style.display="none";t.keyCode==13&&(toggleGameBoard(),f.value="");return},!1);loadAvailableList();loadPlayingList();loadGameBoard()});